#!/usr/bin/env ruby

require 'find'
require 'pathname'
require 'apfel'
require 'csv'

require_relative './toneloc_helpers'

include ToneLoc::BinHelpers
include ToneLoc::ConvertStrings
include ToneLoc::ConvertCSV

if ARGV.length == 0
  print_usage
  exit 0
end

cmd = ARGV.shift
if cmd == 'help'
  exit 0
elsif cmd == 'validate'
  sub_cmd = ARGV.shift
  exit 1 unless valid_sub_command sub_cmd

  if sub_cmd == 'csv'
    puts 'cannot validate csv files yet'
    exit 1
  end

  exit validate_strings

elsif cmd == 'convert'
  sub_cmd = ARGV.shift
  exit 1 unless valid_sub_command sub_cmd

  if sub_cmd == 'strings'
    convert_string_files_to_csv
    exit 0
  elsif sub_cmd == 'csv'
    convert_csv_files_to_strings
    exit 0
  else
    exit 1
  end

else
  print_usage
end

